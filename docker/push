#!/bin/bash
# push-only.sh
# Pou≈æitie: ./push-only.sh <dockerhub-username> <dockerhub-password> <image> <tag>

if [ "$#" -ne 4 ]; then
    echo "Pou≈æitie: $0 <username> <password> <image> <tag>"
    exit 1
fi

USERNAME="$1"
PASSWORD="$2"
IMAGE="$3"
TAG="$4"
FULL_IMAGE="$USERNAME/$IMAGE:$TAG"

# Login do Docker Hub
echo "üîë Prihlasujem sa do Docker Hub..."
echo "$PASSWORD" | docker login --username "$USERNAME" --password-stdin
if [ $? -ne 0 ]; then
    echo "‚ùå Docker login zlyhal"
    exit 1
fi

# Tagovanie existuj√∫ceho image
echo "üè∑ Tagujem image $IMAGE:$TAG ako $FULL_IMAGE..."
docker tag "$IMAGE:$TAG" "$FULL_IMAGE"

# Push na Docker Hub
echo "üì§ Pushujem image na Docker Hub..."
docker push "$FULL_IMAGE"
if [ $? -eq 0 ]; then
    echo "‚úÖ Image bol √∫spe≈°ne pushnut√Ω: $FULL_IMAGE"
else
    echo "‚ùå Push zlyhal"
    exit 1
fi
